---
openapi: '3.0.0'
info:
  title: foo CRUD API
  version: 4.2.0
schemes:
  - http
basePath: /api
consumes:
  - application/json
produces:
  - application/json
paths:
  /common:
    get:
      operationId: commonGet
      summary: here to test path collisons
      responses:
        '200':
          description: OK
          schema:
            $ref: "#/components/schemas/foo"
  /foos:
    post:
      operationId: create
      summary: Create a new foo
      parameters:
        - name: info
          in: body
          schema:
            $ref: "#/components/schemas/foo"
      responses:
        '201':
          description: created
          schema:
            $ref: "#/components/schemas/fooId"
        default:
          description: error
          schema:
            $ref: "#/components/schemas/error"
  /foos/{fooid}:
    get:
      operationId: get
      summary: Get a foo by id
      parameters:
        - $ref: "#/components/parameters/fooid"
      responses:
        '200':
          description: OK
          schema:
            $ref: "#/components/schemas/foo"
        '401':
          $ref: "#/components/responses/401"
        '404':
          $ref: "#/components/responses/404"
        default:
          description: error
          schema:
            $ref: "#/components/schemas/error"
    delete:
      operationId: delete
      summary: delete a foo by id
      parameters:
        - name: fooid
          in: path
          required: true
          type: string
      responses:
        '200':
          description: OK
        '401':
          description: unauthorized
          schema:
            $ref: "#/components/schemas/error"
        '404':
          description: resource not found
          schema:
            $ref: "#/components/schemas/error"
        default:
          description: error
          schema:
            $ref: "#/components/schemas/error"
    post:
      operationId: update
      summary: update a foo by id
      parameters:
        - name: fooid
          in: path
          required: true
          type: string
        - name: info
          in: body
          schema:
            $ref: "#/components/schemas/foo"
      responses:
        '200':
          description: OK
        '401':
          description: unauthorized
          schema:
            $ref: "#/components/schemas/error"
        '404':
          description: resource not found
          schema:
            $ref: "#/components/schemas/error"
        default:
          description: error
          schema:
            $ref: "#/components/schemas/error"

definitions:
  common:
    type: object
    required:
      - id
    properties:
      id:
        type: string
        format: string
        minLength: 1
  foo:
    type: object
    required:
      - name
      - description
    properties:
      id:
        type: string
        format: string
        readOnly: true
      name:
        type: string
        format: string
        minLength: 1
      description:
        type: string
        format: string
        minLength: 1
  fooId:
    type: object
    required:
      - id
    properties:
      id:
        type: string
        format: string
        minLength: 1
  error:
    type: object
    required:
       - message
    properties:
      code:
        type: string
        format: string
      message:
        type: string
      fields:
        type: string

parameters:
  common:
    name: common
    in: query
    type: string
  fooid:
    name: fooid
    in: path
    required: true
    type: string

responses:
  401:
    description: foo unauthorized
    schema:
      $ref: "#/components/schemas/error"
  404:
    description: foo resource not found
    schema:
      $ref: "#/components/schemas/error"
